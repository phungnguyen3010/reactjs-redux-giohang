{"ast":null,"code":"import * as types from \"./../constants/ActionsType\";\nvar initialState = [{\n  product: {\n    id: 1,\n    name: \"Iphone 8x\",\n    image: \"https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/300x/9df78eab33525d08d6e5fb8d27136e95/i/p/iphone_8_64gb.jpg\",\n    description: \"San Pham cua Apple\",\n    price: 300,\n    inventory: 10,\n    rating: 5\n  },\n  quantity: 4\n}, {\n  product: {\n    id: 2,\n    name: \"Samsum Galaxy\",\n    image: \"https://clickbuy.com.vn/uploads/2019/04/samsung-galaxy-s8-do.png\",\n    description: \"San Pham cua SamSum\",\n    price: 250,\n    inventory: 12,\n    rating: 4\n  },\n  quantity: 4\n}];\n\nconst cart = (state = initialState, action) => {\n  var {\n    product,\n    quantity\n  } = action;\n\n  switch (action.type) {\n    case types.ADD_TO_CART:\n      var index = -1;\n      index = findProduct(state, product);\n\n      if (index !== -1) {\n        state[index].quantity += quantity;\n      } else {\n        state.push({\n          product,\n          quantity\n        });\n      }\n\n      localStorage.setItem(\"Cart\", JSON.stringify(state));\n      return [...state];\n\n    default:\n      return [...state];\n  }\n};\n\nvar findProduct = (cart, product) => {\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cart;","map":{"version":3,"sources":["/Users/macbook/My/reactjs/lestion14-cart-template-react/src/reducers/cart.js"],"names":["types","initialState","product","id","name","image","description","price","inventory","rating","quantity","cart","state","action","type","ADD_TO_CART","index","findProduct","push","localStorage","setItem","JSON","stringify","length","i"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,4BAAvB;AAEA,IAAIC,YAAY,GAAG,CACf;AACIC,EAAAA,OAAO,EAAE;AACLC,IAAAA,EAAE,EAAE,CADC;AAELC,IAAAA,IAAI,EAAE,WAFD;AAGLC,IAAAA,KAAK,EAAE,qIAHF;AAILC,IAAAA,WAAW,EAAE,oBAJR;AAKLC,IAAAA,KAAK,EAAE,GALF;AAMLC,IAAAA,SAAS,EAAE,EANN;AAOLC,IAAAA,MAAM,EAAE;AAPH,GADb;AAUIC,EAAAA,QAAQ,EAAE;AAVd,CADe,EAaf;AACIR,EAAAA,OAAO,EAAE;AACLC,IAAAA,EAAE,EAAE,CADC;AAELC,IAAAA,IAAI,EAAE,eAFD;AAGLC,IAAAA,KAAK,EAAE,kEAHF;AAILC,IAAAA,WAAW,EAAE,qBAJR;AAKLC,IAAAA,KAAK,EAAE,GALF;AAMLC,IAAAA,SAAS,EAAE,EANN;AAOLC,IAAAA,MAAM,EAAE;AAPH,GADb;AAUIC,EAAAA,QAAQ,EAAE;AAVd,CAbe,CAAnB;;AA2BA,MAAMC,IAAI,GAAG,CAACC,KAAK,GAAGX,YAAT,EAAuBY,MAAvB,KAAkC;AAC3C,MAAI;AAACX,IAAAA,OAAD;AAAUQ,IAAAA;AAAV,MAAsBG,MAA1B;;AACA,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKd,KAAK,CAACe,WAAX;AACI,UAAIC,KAAK,GAAG,CAAC,CAAb;AACAA,MAAAA,KAAK,GAAGC,WAAW,CAACL,KAAD,EAAQV,OAAR,CAAnB;;AACA,UAAGc,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaN,QAAb,IAAyBA,QAAzB;AACH,OAFD,MAEK;AACDE,QAAAA,KAAK,CAACM,IAAN,CAAW;AACPhB,UAAAA,OADO;AAEPQ,UAAAA;AAFO,SAAX;AAIH;;AACDS,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeV,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AACJ;AAAS,aAAO,CAAC,GAAGA,KAAJ,CAAP;AAdb;AAgBH,CAlBD;;AAoBA,IAAIK,WAAW,GAAG,CAACN,IAAD,EAAOT,OAAP,KAAkB;AAChC,MAAIc,KAAK,GAAG,CAAC,CAAb;;AACA,MAAGL,IAAI,CAACY,MAAL,GAAc,CAAjB,EAAmB;AACf,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAEb,IAAI,CAACY,MAArB,EAA6BC,CAAC,EAA9B,EAAiC;AAC7B,UAAGb,IAAI,CAACa,CAAD,CAAJ,CAAQtB,OAAR,CAAgBC,EAAhB,KAAuBD,OAAO,CAACC,EAAlC,EAAqC;AACjCa,QAAAA,KAAK,GAAGQ,CAAR;AACA;AACH;AACJ;AACJ;;AACD,SAAOR,KAAP;AACH,CAXD;;AAaA,eAAeL,IAAf","sourcesContent":["import * as types from \"./../constants/ActionsType\"\n\nvar initialState = [\n    {\n        product: {\n            id: 1,\n            name: \"Iphone 8x\",\n            image: \"https://cdn.cellphones.com.vn/media/catalog/product/cache/7/small_image/300x/9df78eab33525d08d6e5fb8d27136e95/i/p/iphone_8_64gb.jpg\",\n            description: \"San Pham cua Apple\",\n            price: 300,\n            inventory: 10,\n            rating: 5\n        },\n        quantity: 4\n    },\n    {\n        product: {\n            id: 2,\n            name: \"Samsum Galaxy\",\n            image: \"https://clickbuy.com.vn/uploads/2019/04/samsung-galaxy-s8-do.png\",\n            description: \"San Pham cua SamSum\",\n            price: 250,\n            inventory: 12,\n            rating: 4\n        },\n        quantity: 4\n    }\n];\n\nconst cart = (state = initialState, action) => {\n    var {product, quantity} = action;\n    switch (action.type) {\n        case types.ADD_TO_CART:\n            var index = -1;\n            index = findProduct(state, product);\n            if(index !== -1){\n                state[index].quantity += quantity;\n            }else{\n                state.push({\n                    product,\n                    quantity\n                });\n            }\n            localStorage.setItem(\"Cart\", JSON.stringify(state));\n            return [...state];\n        default: return [...state];\n    }\n}\n\nvar findProduct = (cart, product) =>{\n    var index = -1;\n    if(cart.length > 0){\n        for(var i=0; i< cart.length; i++){\n            if(cart[i].product.id === product.id){\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n\nexport default cart;"]},"metadata":{},"sourceType":"module"}